{% extends host_template %}

{% block content %}
<script type="text/javascript">

var hide_children = function (el){
    $(el).children('ul').css('display', 'none');
}

jQuery(document).ready(function(){

    // Collapse childs of menus
    $('div[id^={{ menu_slug }}_menu] .has_children').each(function(){
        hide_children($(this).parent());
    });

    // Expand childs on mouse enter
    $('div[id^={{ menu_slug }}_menu] ul li').each(function(){
      $(this).mouseenter(function() {
        $(this).children('ul').css('display', 'block');
      });
    });
    // Collapse whe whole menu if the alignament is VERTICAL
    if ("{{align}}" === "HORIZONTAL"){
      $('div[id^={{ menu_slug }}_menu] ul li').each(function(){
        $(this).mouseleave(function() {
          hide_children($(this));
        });
      });
    }else{
      $('div[id^={{ menu_slug }}_menu] .has_children').each(function(){
          $(this).mouseleave(function() {
            hide_children($(this).parent());
          });
      });
    }

});
</script>

<ul>
    {{ menu_items|unordered_list }}
</ul>
{% endblock content %}
