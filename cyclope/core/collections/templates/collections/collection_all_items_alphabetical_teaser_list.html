{% extends host_template %}

{% load i18n cyclope_utils fb_versions %}

{% block content %}

  <div class="collection {{ collection.slug }}">
    <div class="collection_header">
      {% if collection.visible %}
        <big class="title">{{ collection.name }}</big>

        {% if collection.image %}
        <img class="image" src="{% version collection.image.path 'medium' %}" border="0"/>
        {% endif %}

        {% if collection.description %}
        <div class="text">
          {{ collection.description|safe }}
        </div>
        {% endif %}
      {% endif %}
      <br class="clear"/>
    </div>
  </div>

  {% if page %}
    {% for p in page.paginator.pages %}
      {% if p == page %}
          <span class="selected">{{page}}</span>
      {% else %}
        <a href="?{% if query %}q={{ query }}&amp;{% endif %}page={{ p.number }}">{{p}}</a>
      {% endif %}
      {% if not forloop.last %}|{% endif %}
    {% endfor %}
  {% endif %}

  {% comment %}
  We show a teaser view of every object belonging to this category.
  {% endcomment %}

  {% for categorization in categorizations %}
    {% join categorization.content_type.app_label  "/" categorization.content_type.model "_teaser.html" as template_path %}

    {% comment %}
      we alias the actual object with the model name
      so the included template is reusable
      and can access the content object using an explicit name
    {% endcomment %}

    {% alias categorization.content_object as categorization.content_type.model %}
    {% include template_path %}
  {% endfor %}

{% endblock %}
