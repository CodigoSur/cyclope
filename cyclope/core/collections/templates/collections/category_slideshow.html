{% extends host_template %}

{% load i18n cyclope_utils fb_versions %}

{% block extra_head %}
<script type="text/javascript" src="{{ CYCLOPE_STATIC_URL }}js/jquery.jcarousel.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("#slideshow{% if region_name %}-{{region_name}}{% endif %}-{{category_slug}}").jcarousel({
        visible: {{view_options.visible_items}},
        scroll: {{view_options.scroll_by}},
        wrap: {{view_options.navigation|safe}},
        auto: {% if view_options.auto_play %}{{view_options.delay}}{% else %}0{% endif %},
        animation: {{view_options.speed}}
    });
});
</script>
{% endblock %}

{% block content %}
  {% comment %}
  The content of this view is composed by including a template for each content in the category
  The included template may be something different from a teaser
  {% endcomment %}
    <ul id="slideshow{% if region_name %}-{{region_name}}{% endif %}-{{category_slug}}" class="slideshow">
    {% for categorization in categorizations %}
      {% join categorization.content_type.app_label  "/" categorization.content_type.model "_" inline_view_name ".html" as template_path %}

      {% comment %}
        we alias the actual object with the model name
        so the included template is reusable
        and can access the content object using an explicit name
      {% endcomment %}

      {% alias categorization.content_object as categorization.content_type.model %}

      {% comment %}
        we also alias as 'media' because some medialibrary templates expect this name
      {% endcomment %}

      {% alias categorization.content_object as 'media' %}
      <li>{% include template_path %}</li>
    {% endfor %}
    </ul>
{% endblock %}
