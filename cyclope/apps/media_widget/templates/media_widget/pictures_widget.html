<head>
    <!--styles-->
    <link href="{{CYCLOPE_STATIC_URL}}css/bootstrap.min.css" rel="stylesheet">
    <!--scripts-->
    <script type="text/javascript" src="{{CYCLOPE_STATIC_URL}}js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="{{CYCLOPE_STATIC_URL}}js/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="{{CYCLOPE_STATIC_URL}}js/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(function(){ 
            //refresh parent (article's admin) media widget picture
            function media_widget_refresh(ct_id, obj_id){
                //hidden input value
                $("#id_picture", window.parent.document).val(ct_id+"-"+obj_id)
                //representation
                $.get("/related_admin/render_object/" + ct_id + "/" + obj_id + "/", function(data) {
                    $(".object-representation", window.parent.document).html(data);
                });
            }            
            {% if new_picture %}
                var ct_id = {{ new_picture.picture_ct }};
                var obj_id = {{ new_picture.picture_id }};
                media_widget_refresh(ct_id, obj_id);
            {% elif delete_picture %}
                $(".object-representation", window.parent.document).html("<br/>Imágenes del artículo...");
            {% endif %}
            //TODO move to .js in MdWdgt
        
            // clean message alerts after 8s
            $(".message-row").delay(8000).fadeOut();
        });
    </script>
</head>
<body>
    <div class="container-fluid">
        {% if messages %}
            {% for message in messages %}
                <div  class="row message-row">
                    <div class="col-xs-12 {% if message.tags %} alert alert-{{ message.tags }}{% endif %}">
                        {{ message }}
                    </div>
                </div>
            {% endfor %}
        {% endif %}
        <div class="row">
            <div class="col-xs-12">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation">
                        <a href="#upload" aria-controls="upload" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                            Subir
                        </a>
                    </li>
                    <li role="presentation" class="active">
                        <a href="#search" aria-controls="search" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                            Buscar en biblioteca
                        </a>
                    </li>
                    <li role="presentation">
                        <a href="#delete" aria-controls="search" role="tab" data-toggle="tab">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                            Eliminar
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane" id="upload">
                        {% include "media_widget/picture_upload.html" %}
                    </div>
                    <div role="tabpanel" class="tab-pane active" id="search">
                        {% include "media_widget/picture_select.html" %}
                    </div>
                    <div role="tabpanel" class="tab-pane" id="delete">
                        {% include "media_widget/picture_delete.html" %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
